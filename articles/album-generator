from jinja2 import Environment, FileSystemLoader
import os

# Load the template
env = Environment(loader=FileSystemLoader('.'))
template = env.get_template('/articles/album-review-template.html')  # Adjust the path as needed

# List of album data
albums = [
    {
        "artist_name": "Linkin Park",
        "album_title": "Hybrid Theory",
        "release_date": "October 24, 2000",
        "genres": "Nu Metal, Rap Metal, Alternative Rock, Rap Rock, Alternative Metal",
        "album_cover": "/images/Linkin-Park-Hybrid-Theory.jpg",
        "rating": 10,
        "content": "<p>...</p>",  # Full content here
        "tracklist": [
            "Papercut", "One Step Closer", "With You", "Points of Authority", 
            "Crawling", "Runaway", "By Myself", "In the End", 
            "A Place for My Head", "Forgotten", "Cure for the Itch", "Pushing Me Away"
        ],
        "spotify_link": "https://open.spotify.com/album/2pKw6GERJVAD61449B1EEM",
        "apple_music_link": "https://music.apple.com/us/album/hybrid-theory/528436018",
        "post_date": "September 24, 2024",
        "author": "Artop Malimo"
    }
]

# Ensure the directory exists
os.makedirs('articles', exist_ok=True)

# Loop through the albums and generate the pages
for album in albums:
    # Render the HTML content
    output_html = template.render(album)

    # Generate the output file name in the format: artist-title-album-title.html
    output_path = f"articles/{album['artist_name'].replace(' ', '-').lower()}-{album['album_title'].replace(' ', '-').lower()}.html"

    # Write the generated HTML to a file
    with open(output_path, "w", encoding="utf-8") as f:
        f.write(output_html)

    print(f"Page generated: {output_path}")
